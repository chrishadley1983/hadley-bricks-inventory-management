{
  "agent": "define-done",
  "lastRun": "2026-02-12T12:00:00Z",
  "lastCommit": null,
  "status": "success",
  "featuresDefinedCount": 11,
  "averageCriteriaPerFeature": 65,
  "recentFeatures": [
    {
      "name": "vercel-optimisation",
      "criteriaCount": 15,
      "autoVerifyCount": 15,
      "humanVerifyCount": 0,
      "definedAt": "2026-02-12T12:00:00Z",
      "note": "Reduce Vercel Hobby tier usage: polling intervals (1s→30s, 30s→90s, 60s→120s), refetchIntervalInBackground:false, cache headers on 8 routes, batched orders dashboard-status endpoint"
    },
    {
      "name": "fix-agent",
      "criteriaCount": 28,
      "autoVerifyCount": 28,
      "humanVerifyCount": 0,
      "definedAt": "2026-01-24T11:30:00Z",
      "note": "Lightweight Fix Agent for fix/hotfix track: 6-phase workflow (Analyse→Plan→Approve→Branch→Build→Verify→Handoff), CLAUDE.md branch policy, smoke test infrastructure"
    },
    {
      "name": "merge-feature-extended",
      "criteriaCount": 24,
      "autoVerifyCount": 24,
      "humanVerifyCount": 0,
      "definedAt": "2026-01-24T10:00:00Z",
      "note": "Extend Merge Feature Agent with deployment verification: preview, verify-production, rollback modes; track detection; Playwright critical path tests"
    },
    {
      "name": "updated-vinted-automation",
      "criteriaCount": 214,
      "autoVerifyCount": 209,
      "humanVerifyCount": 5,
      "definedAt": "2026-01-21T14:30:00Z",
      "note": "Refined to add v2 requirements: Windows tray app, server-side scheduling, heartbeat protocol"
    },
    {
      "name": "partout-value",
      "criteriaCount": 30,
      "autoVerifyCount": 30,
      "humanVerifyCount": 0,
      "definedAt": "2026-01-20T10:00:00Z"
    },
    {
      "name": "cost-modelling",
      "criteriaCount": 77,
      "autoVerifyCount": 77,
      "humanVerifyCount": 0,
      "definedAt": "2026-01-18T14:00:00Z"
    },
    {
      "name": "business-workflow-phases-2-6",
      "criteriaCount": 142,
      "autoVerifyCount": 142,
      "humanVerifyCount": 0,
      "definedAt": "2026-01-18T12:00:00Z"
    },
    {
      "name": "business-workflow",
      "criteriaCount": 46,
      "autoVerifyCount": 46,
      "humanVerifyCount": 0,
      "definedAt": "2026-01-18T10:00:00Z"
    },
    {
      "name": "ebay-negotiation-automation-engine",
      "criteriaCount": 27,
      "autoVerifyCount": 27,
      "humanVerifyCount": 0,
      "definedAt": "2026-01-17T19:30:00Z"
    },
    {
      "name": "listing-optimiser",
      "criteriaCount": 42,
      "autoVerifyCount": 42,
      "humanVerifyCount": 0,
      "definedAt": "2026-01-17T12:00:00Z"
    }
  ],
  "criteriaPatterns": {
    "functional": [
      "Button/element exists on page (DOM query)",
      "API returns expected data shape (schema validation)",
      "Data persists to database (query verification)",
      "File downloads on action (network response check)",
      "Navigation occurs on trigger (URL change)",
      "Multi-select with checkbox (selection count)",
      "Filter reduces visible rows (count comparison)",
      "Sort changes row order (order verification)",
      "Service class exports expected methods (file grep)",
      "Score calculation returns weighted factors (unit test)",
      "Configurable threshold stored in database (table query)",
      "Cron job triggers at scheduled times (log verification)",
      "Page renders three sections in correct order (DOM order)",
      "Task queue sorted by priority then due time (order verification)",
      "Dynamic counts match database queries (count comparison)",
      "Deep-link URL navigates to correct page (route validation)",
      "Timer countdown displays remaining time (UI state check)",
      "Start/stop button toggles tracking state (state validation)",
      "Calendar shows dates with scheduled items (DOM check)",
      "Progress bar shows percentage toward target (width calculation)",
      "Scenario CRUD operations (create, read, update, delete)",
      "Form inputs editable and persist on save",
      "Live calculation on input change (no API call)",
      "Collapsible sections with state persistence",
      "Compare mode with side-by-side layout",
      "Tab shows external API data (BrickLink partout values)",
      "Table sorted by value descending (highest first)",
      "Parts list with full metrics (price, qty, sell-through, stock)",
      "Claude Code prompt file exists with scanning instructions",
      "CAPTCHA detection checks URL, DOM, and title",
      "Cron script has random delay and operating hours check",
      "Watchlist materialisation produces 200 sets maximum",
      "Sales rank bootstrap batches requests with rate limiting",
      "Server-side schedule generation with seeded random",
      "Heartbeat polling with version synchronization",
      "Windows tray app with NotifyIcon integration",
      "Config polling with schedule version detection",
      "CLI mode exists with expected output format",
      "Config file created with required JSON schema",
      "Track detection from branch naming convention",
      "Vercel CLI integration for preview URL retrieval",
      "Playwright tests run authenticated against URLs",
      "Last deploy tracking with JSON state file"
    ],
    "error": [
      "Toast on error condition (toast component check)",
      "Validation message on invalid input (error element visible)",
      "Graceful handling of network failure (error state shown)",
      "Empty state message when no data (placeholder visible)",
      "Retry button on API failure (button visible)",
      "Fallback message when data unavailable",
      "Partial failure handling (successful items saved)",
      "Rate limit retry with backoff (retry logic test)",
      "Partial load on API failure (other sections still render)",
      "Error badge on failed section (visual indicator)",
      "Permission denied shows graceful fallback (in-app notifications)",
      "Negative value prevention (min attribute)",
      "Delete last item prevention (disabled state)",
      "Concurrent edit warning (optimistic locking)",
      "Missing data shows N/A fallback (ratio calculation)",
      "CAPTCHA triggers automatic pause with reason",
      "Consecutive failure alert after 3 failures",
      "Scan history shows success/failed/CAPTCHA status icons",
      "Chrome not responding retries 3x then pauses",
      "API unreachable uses cached schedule",
      "Claude CLI failure skips to next scan",
      "Disconnection warning after 10 minutes no heartbeat",
      "CLI not available shows install instructions",
      "Timeout shows manual check instructions",
      "Test failure reports specific path with error details",
      "Confirmation required before destructive action",
      "Post-deploy failure includes recovery command"
    ],
    "performance": [
      "Operation completes under X seconds (timed execution)",
      "Handles N items without degradation (load test)",
      "No memory leaks during operation (heap snapshot)",
      "API round-trip under threshold (network timing)",
      "Batch processing handles 50+ items (load test)",
      "Page initial load under threshold (time to interactive)",
      "Progressive loading of dynamic data (non-blocking render)",
      "Optimistic UI update under 1 second (perceived latency)",
      "Timer updates every second without jank (smooth animation)",
      "Sections load independently (parallel requests)",
      "Client-side calculation under 50ms (no perceptible delay)",
      "PDF generation under 5 seconds",
      "CSV generation under 1 second",
      "External API data loads under 10 seconds (BrickLink POV)",
      "Automation page loads under 2 seconds",
      "Watchlist health page handles 200 sets",
      "Opportunity processing under 5 seconds",
      "Main loop runs every 30 seconds",
      "Config polling every 5 minutes",
      "Heartbeat every 5 minutes",
      "Deploy wait timeout configurable (default 120s)",
      "Page load timeout configurable (default 15s)",
      "Polling interval for deploy readiness (5 seconds)"
    ],
    "ui": [
      "Component uses shadcn/ui (class inspection)",
      "Responsive at 375px, 768px, 1024px (viewport test)",
      "Keyboard navigation works (focus management)",
      "Loading skeleton shown during fetch (skeleton visible)",
      "Side-by-side comparison view (layout check)",
      "Summary bar with metrics (DOM elements present)",
      "Tab navigation between sections (tab click test)",
      "Toggle switch for enable/disable (toggle interaction)",
      "Grid/table editor for CRUD (row add/edit/delete test)",
      "Colour-coded priority indicators (CSS class verification)",
      "Collapsible sections (toggle state persistence)",
      "Progress indicators (circular/bar for timers)",
      "Sparkline charts for trend visualization (chart element)",
      "Calendar mini-view with day selection (date grid)",
      "Currency formatting with £ symbol and 2 decimals",
      "Percentage formatting with % symbol",
      "Positive/negative value colouring (green/red)",
      "Read-only calculated fields (visual distinction)",
      "Button loading states (spinner during operation)",
      "Visual recommendation indicator (partout vs sell complete)",
      "Scanner status card shows running/paused state",
      "COG% badge is color coded by threshold",
      "Listed time has visual aging (green→yellow→orange→red)",
      "Watchlist health flags display with emoji indicators",
      "Hover popup shows sales and stock data",
      "System tray icon with four color states",
      "Tray tooltip shows next scan and progress",
      "Context menu with pause/resume/dashboard",
      "Connection status indicator (Connected/Disconnected)",
      "Machine name displayed in dashboard"
    ],
    "windows": [
      ".NET 8 project with Windows Forms",
      "NotifyIcon for system tray",
      "ContextMenuStrip for right-click menu",
      "Installer creates Start Menu shortcut",
      "Auto-start registry option",
      "Log files in LocalAppData with date pattern",
      "30-day log retention cleanup",
      "Seeded random for reproducible schedules",
      "Machine ID for heartbeat identification",
      "Cached schedule fallback on API failure"
    ],
    "integration": [
      "Agent spec updated with new modes",
      "Existing modes preserved and functional",
      "Uses existing test infrastructure"
    ]
  },
  "antiVagueTransformations": [
    {
      "vague": "works correctly",
      "specific": "Returns HTTP 200 with JSON body containing expected fields"
    },
    {
      "vague": "fast",
      "specific": "Completes in < X ms (specify threshold)"
    },
    {
      "vague": "user-friendly",
      "specific": "Shows inline validation errors within 100ms of blur"
    },
    {
      "vague": "handles errors",
      "specific": "Network timeout shows retry button; 401 redirects to login"
    },
    {
      "vague": "looks good",
      "specific": "Uses project design system components (shadcn/ui)"
    },
    {
      "vague": "secure",
      "specific": "API validates auth token; rejects requests without valid session"
    },
    {
      "vague": "reliable",
      "specific": "Succeeds on 3 consecutive attempts; no data corruption"
    },
    {
      "vague": "shows pricing",
      "specific": "Displays current price, competitor average, sold average, suggested price"
    },
    {
      "vague": "analyses listing",
      "specific": "Scores on 5 categories with specific point allocations"
    },
    {
      "vague": "sends offers automatically",
      "specific": "Cron triggers at configured times; offers recorded in audit table"
    },
    {
      "vague": "tracks success",
      "specific": "Calculates acceptance rate and avg discount converted from offer records"
    },
    {
      "vague": "shows tasks",
      "specific": "Displays prioritised list sorted by priority then due time with dynamic counts"
    },
    {
      "vague": "tracks dispatch deadlines",
      "specific": "Stores dispatch_by timestamp from platform API; displays countdown timer"
    },
    {
      "vague": "tracks time",
      "specific": "Timer with start/stop, category selection, daily/weekly totals displayed"
    },
    {
      "vague": "pomodoro timer",
      "specific": "Countdown with work/break phases, session counter, streak tracking, audio notifications"
    },
    {
      "vague": "shows progress",
      "specific": "Progress bar with percentage, current vs target values, colour-coded status"
    },
    {
      "vague": "calendar view",
      "specific": "Month grid with day selection, icons on scheduled days, navigation arrows"
    },
    {
      "vague": "notifications",
      "specific": "Browser push notifications for configured events with permission handling"
    },
    {
      "vague": "calculates P&L",
      "specific": "Turnover - Fees - VAT - Costs - COG = Net Profit; Tax calculated on taxable income"
    },
    {
      "vague": "compare scenarios",
      "specific": "Side-by-side layout with delta values and % change; highlight >10% differences"
    },
    {
      "vague": "auto-saves",
      "specific": "Draft saved to server every 30 seconds; restoration prompt on page load"
    },
    {
      "vague": "shows partout value",
      "specific": "Displays POV for New/Used, ratio vs set price, parts list sorted by value with sell-through rates"
    },
    {
      "vague": "scans automatically",
      "specific": "Cron triggers with randomised delay; Claude Code executes with Chrome extension; results posted to API"
    },
    {
      "vague": "detects CAPTCHA",
      "specific": "Checks URL for captcha, DOM for iframe/datadome elements, title for blocked/captcha keywords"
    },
    {
      "vague": "sends alerts",
      "specific": "Pushover notification with set details, pricing, COG%, profit; high priority for <30% COG"
    },
    {
      "vague": "tracks watchlist effectiveness",
      "specific": "Stats table with total_scans, listings_found, viable_found; flags: Stale/Low Yield/Active based on thresholds"
    },
    {
      "vague": "server generates schedule",
      "specific": "Schedule API returns ScheduledScan array with seeded random times; version increments on watchlist change"
    },
    {
      "vague": "tray app runs",
      "specific": "Windows tray app with NotifyIcon, 4 color states, context menu, 30-second main loop, 5-minute heartbeat"
    },
    {
      "vague": "stays connected",
      "specific": "Heartbeat every 5 minutes; dashboard shows Connected/Disconnected with last seen time; warning after 10 min"
    },
    {
      "vague": "handles missed scans",
      "specific": "Skip entirely, do NOT catch-up; resume from next scheduled scan; log warning if gap > 2 hours"
    },
    {
      "vague": "verifies deployment",
      "specific": "Playwright tests against preview/production URLs; critical paths checked with configurable timeout; rollback on failure"
    }
  ]
}
