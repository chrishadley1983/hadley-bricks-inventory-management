# Merge Report: fix/purchase-photo-compression

**Date:** 2026-01-29
**Branch:** `fix/purchase-photo-compression`
**PR:** [#53](https://github.com/chrishadley1983/hadley-bricks-inventory-management/pull/53)
**Commit:** `aa4bca9`
**Track:** FIX

---

## Summary

Added client-side image compression to purchase photo uploads to prevent Vercel payload size limit errors when uploading large photos (e.g., 3024x4032 phone photos).

## Changes

| File | Change |
|------|--------|
| `apps/web/src/components/features/purchases/PurchaseImages.tsx` | Added compression before upload |
| `apps/web/src/components/features/purchases/PhotoUploadInline.tsx` | Added compression before storing in queue |

## Technical Details

- Images compressed to max 1600px dimension
- JPEG output at 80% quality
- Uses existing `compressImage` utility (already used for eBay listings)
- Fallback to original file if compression fails
- Memory leak in fallback path fixed (proper URL.revokeObjectURL cleanup)

## Verification

| Check | Status |
|-------|--------|
| TypeScript | ✅ Pass |
| ESLint | ✅ Pass |
| Vercel Preview | ✅ Pass |
| PR Merged | ✅ Squash merge |

## Prerequisites (FIX Track)

| Requirement | Status |
|-------------|--------|
| Code review completed | ✅ Done |

---

*Generated by Merge Feature Agent*
